# team_work_409
# 定长内存分配器库 (v1)

## 简介

基于哈希映射的多种定长内存分配器，可用于替换 `new` 和 `delete` 等内存申请释放的系统调用，提供更高效的内存管理方案。

## 核心功能

### 内存分配
- 提供 `allocate` 方法
- 从内存池中分配指定大小的内存块
- 支持预设的多种固定长度内存块分配

### 内存释放
- 提供 `deallocate` 方法
- 将内存块安全归还到内存池
- 自动维护内存池的空闲状态

### 内存块管理
- 通过 `allocateNewBlock` 方法管理内存块
- 负责内存块的创建与销毁
- 维护内存池的整体状态和可用性

### 自由链表
- 采用无锁的自由链表结构
- 高效管理空闲内存块
- 显著提升多线程环境下的并发性能

## 优势特点

- **高性能**：避免频繁系统调用开销，分配释放操作接近 O(1) 复杂度
- **线程安全**：无锁设计减少多线程竞争，适合高并发场景
- **低碎片**：定长内存块设计有效减少内存碎片
- **易用性**：简单直观的接口，易于集成到现有项目

## 使用示例

```cpp
// 初始化分配器，指定支持的内存块大小
FixedSizeAllocator allocator({32, 64, 128, 256, 512});

// 分配128字节的内存块
void* data = allocator.allocate(128);

// 使用分配的内存
// ...

// 释放内存块（需指定对应大小）
allocator.deallocate(data, 128);
```

## 适用场景

- 频繁进行相同大小内存操作的应用
- 实时系统和高性能服务器
- 多线程并发环境
- 需要减少内存碎片的场景

## 注意事项

- 分配和释放必须使用相同的内存块大小
- 需在初始化时指定支持的内存块大小
- 目前版本不支持动态调整内存池总大小
- 确保正确释放所有分配的内存，避免内存泄漏

## 版本信息

- **版本**：v1
- **状态**：初始版本，包含核心功能实现

项目代码框架
plaintext
team_work_409/
├── include/
│   └── fixed_size_allocator.h       # 分配器类声明
├── src/
│   ├── fixed_size_allocator.cpp     # 分配器核心实现
│   └── free_list.cpp                # 自由链表实现
├── test/
│   ├── unit_test.cpp                # 单元测试代码
│   └── performance_test.cpp         # 性能测试代码
├── example/
│   └── basic_usage.cpp              # 使用示例代码
├── CMakeLists.txt                   # 项目构建配置
├── README.md                        # 项目说明文档
└── LICENSE                          # 开源许可证
核心文件说明
fixed_size_allocator.h
定义FixedSizeAllocator类接口
声明内存分配 / 释放核心方法
定义内部数据结构和类型别名
fixed_size_allocator.cpp
实现分配器核心逻辑
内存池初始化与管理
哈希映射管理不同大小的内存块
free_list.cpp
无锁自由链表实现
空闲内存块的高效管理
线程安全的操作接口
单元测试文件
验证内存分配 / 释放的正确性
测试边界条件和异常处理
多线程环境下的功能验证
性能测试文件
对比系统调用与自定义分配器的性能
多线程并发性能测试
内存碎片统计与分析
编译与安装
bash
# 克隆仓库
git clone https://github.com/your-org/team_work_409.git
cd team_work_409

# 创建构建目录
mkdir build && cd build

# 编译项目
cmake ..
make

# 运行测试
make test

# 安装库文件
make install





扩展计划
v2 版本：支持动态调整内存池大小
v3 版本：增加内存使用监控与统计功能
v4 版本：支持自定义内存对齐方式
v5 版本：增加内存泄露检测功能
